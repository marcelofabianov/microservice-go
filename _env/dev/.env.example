# --- User Config ---
# Automatically detected by setup-dev (id -u / id -g)
HOST_UID=1000
HOST_GID=1000

# --- Docker Port Mapping ---
# Host ports (can be changed to avoid conflicts)
HOST_API_PORT=8080
HOST_POSTGRES_PORT=5432
HOST_REDIS_PORT=6379
HOST_ADMINER_PORT=8081
HOST_REDIS_COMMANDER_PORT=8082

# --- General Config ---
APP_GENERAL_ENV=development
APP_GENERAL_TZ=America/Sao_Paulo
APP_GENERAL_SERVICE_NAME=course-api

# --- Logger Config ---
APP_LOGGER_LEVEL="debug"

# --- HTTP Server Config ---
APP_HTTP_HOST=0.0.0.0
APP_HTTP_PORT=8080
APP_HTTP_READ_TIMEOUT=10s
APP_HTTP_WRITE_TIMEOUT=10s
APP_HTTP_IDLE_TIMEOUT=120s
APP_HTTP_SHUTDOWN_TIMEOUT=30s
APP_HTTP_REQUEST_TIMEOUT=30s
APP_HTTP_MAX_BODY_SIZE=1048576

# --- HTTP Security Headers ---
APP_HTTP_SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff
APP_HTTP_SECURITY_X_FRAME_OPTIONS=DENY
APP_HTTP_SECURITY_CONTENT_SECURITY_POLICY="default-src 'none'"
APP_HTTP_SECURITY_REFERRER_POLICY=no-referrer
APP_HTTP_SECURITY_STRICT_TRANSPORT_SECURITY="max-age=31536000; includeSubDomains"
APP_HTTP_SECURITY_CACHE_CONTROL="no-store, no-cache, must-revalidate"
APP_HTTP_SECURITY_PERMISSIONS_POLICY="camera=(), microphone=(), geolocation=()"
APP_HTTP_SECURITY_X_DNS_PREFETCH_CONTROL=off
APP_HTTP_SECURITY_X_DOWNLOAD_OPTIONS=noopen

# --- HTTP CORS Config ---
APP_HTTP_CORS_ENABLED=true
APP_HTTP_CORS_ALLOWED_ORIGINS="https://frontend.local:5173"
APP_HTTP_CORS_ALLOWED_METHODS="GET,POST,PUT,DELETE,PATCH,OPTIONS"
APP_HTTP_CORS_ALLOWED_HEADERS="Accept,Authorization,Content-Type,X-CSRF-Token"
APP_HTTP_CORS_EXPOSED_HEADERS="X-Request-ID"
APP_HTTP_CORS_ALLOW_CREDENTIALS=true
APP_HTTP_CORS_MAX_AGE=300

# --- HTTP Compression Config ---
APP_HTTP_COMPRESSION_ENABLED=true
APP_HTTP_COMPRESSION_LEVEL=5

# --- HTTP Rate Limiting Config ---
APP_HTTP_RATELIMIT_ENABLED=true
APP_HTTP_RATELIMIT_GLOBAL_LIMIT=1000
APP_HTTP_RATELIMIT_GLOBAL_WINDOW=1s
APP_HTTP_RATELIMIT_GLOBAL_BURST=1500
APP_HTTP_RATELIMIT_TRUSTED_PROXIES="10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"

# --- HTTP CSRF Protection Config ---
APP_HTTP_CSRF_ENABLED=true
APP_HTTP_CSRF_SECRET="change-me-in-production-32-bytes-min"
APP_HTTP_CSRF_COOKIE_NAME=csrf_token
APP_HTTP_CSRF_HEADER_NAME=X-CSRF-Token
APP_HTTP_CSRF_TTL=24h
APP_HTTP_CSRF_EXEMPT="/health,/ping,/api/v1/auth/login"

# --- TLS Config ---
APP_SERVER_API_TLS_ENABLED=true
APP_SERVER_API_TLS_CERT_FILE=./certs/course-cert.pem
APP_SERVER_API_TLS_KEY_FILE=./certs/course-key.pem
APP_SERVER_API_TLS_HTTPS_ONLY=true
APP_SERVER_API_TLS_REDIRECT_URL=

# --- Database Connect Config ---
APP_DB_CONNECT_QUERY_TIMEOUT=5s
APP_DB_CONNECT_EXEC_TIMEOUT=5s
APP_DB_CONNECT_BACKOFF_MIN=200ms
APP_DB_CONNECT_BACKOFF_MAX=15s
APP_DB_CONNECT_BACKOFF_FACTOR=2
APP_DB_CONNECT_BACKOFF_JITTER=true
APP_DB_CONNECT_BACKOFF_RETRIES=7

# --- Database Pool Config ---
APP_DB_POOL_MAX_OPEN_CONNS=20
APP_DB_POOL_MAX_IDLE_CONNS=10
APP_DB_POOL_CONN_MAX_LIFETIME=15m
APP_DB_POOL_CONN_MAX_IDLE_TIME=5m
APP_DB_POOL_HEALTH_CHECK_PERIOD=1m

# --- Database Credentials ---
APP_DB_HOST=course-postgres
APP_DB_PORT=5432
APP_DB_NAME=course
APP_DB_USER=course
APP_DB_PASSWORD=course123
APP_DB_SSL_MODE=disable

# --- Cache Config Config ---
APP_REDIS_HOST=course-redis
APP_REDIS_PORT=6379
APP_REDIS_PASSWORD=redis123
APP_REDIS_DB=0

# --- Cache Connect Config ---
APP_REDIS_CONNECT_QUERY_TIMEOUT=2s
APP_REDIS_CONNECT_EXEC_TIMEOUT=2s
APP_REDIS_CONNECT_BACKOFF_MIN=200ms
APP_REDIS_CONNECT_BACKOFF_MAX=15s
APP_REDIS_CONNECT_BACKOFF_FACTOR=2
APP_REDIS_CONNECT_BACKOFF_JITTER=true
APP_REDIS_CONNECT_BACKOFF_RETRIES=7

# --- Cache Pool Config ---
APP_REDIS_POOL_MAX_IDLE_CONNS=10
APP_REDIS_POOL_MAX_ACTIVE_CONNS=20

# --- Migrations Config ---
GOOSE_DRIVER=postgres
GOOSE_MIGRATION_DIR=/app/db/migrations
GOOSE_FIXTURES_DIR=/app/db/fixtures
GOOSE_SEEDS_DIR=/app/db/seeds
GOOSE_DBSTRING="postgres://${APP_DB_USER}:${APP_DB_PASSWORD}@${APP_DB_HOST}:${APP_DB_PORT}/${APP_DB_NAME}?sslmode=${APP_DB_SSL_MODE}"

# --- JWT Authentication Config ---
APP_JWT_ACCESS_SECRET=your-super-secret-access-key-min-32-bytes-change-in-production
APP_JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-bytes-change-in-production
APP_JWT_ACCESS_TOKEN_TTL=15m
APP_JWT_REFRESH_TOKEN_TTL=168h
APP_JWT_ISSUER=course-api
